getwd()
setwd("C:/Users/Student User/Documents/INFO201/info-201-final-project")
getwd()
install.packages("devtools")
install.packages('dplyr')
install.packages("ggplot2")
devtools::install_github("wmurphyrd/fiftystater")
## year and age group = gradient map
library("dplyr")
library("ggplot2")
library("fiftystater")
source("R/format_data.R")
getMap <- function(year, age_group) {
data <- eval(parse(text=paste0("data_", year)))
cols <- c("state", age_group,"unknown")
data <- data[grepl(paste(cols, collapse="|"), names(data))]
data$state <- tolower(data$state)
data$state <- gsub("dist", "district", data$state)
data <- data %>%
filter(state != "national",
state != "puerto rico")
fatalities <- data[, age_group]
fatalities <- as.numeric(fatalities)
min <- min(fatalities)
max <- max(fatalities)
ggplot(data, aes(map_id = state)) +
# map points to the fifty_states shape data
geom_map(aes(fill = fatalities), map = fifty_states) +
expand_limits(x = fifty_states$long, y = fifty_states$lat) +
scale_fill_gradient(low= "yellow", high = "maroon", breaks =
seq(min, max, floor((max-min)/4))) +
ggtitle(paste("Fatal Car Crashes for Ages", age_group, "in", year)) +
theme(text=element_text(size=16,  family="serif"),
plot.title = element_text(hjust = 0.5),
legend.position = "right",
panel.background = element_blank()) +
labs(fill = "Fatalities", x = "", y = "") +
coord_map() +
scale_x_continuous(breaks = NULL) +
scale_y_continuous(breaks = NULL)
}
getMap(2012, "25-34")
getMap <- function(year, age_group) {
data <- eval(parse(text=paste0("data_", year)))
cols <- c("state", age_group,"unknown")
data <- data[grepl(paste(cols, collapse="|"), names(data))]
data$state <- tolower(data$state)
data$state <- gsub("dist", "district", data$state)
data <- data %>%
filter(state != "national",
state != "puerto rico")
fatalities <- data[, age_group]
fatalities <- as.numeric(fatalities)
min <- min(fatalities)
max <- max(fatalities)
ggplot(data, aes(map_id = state)) +
# map points to the fifty_states shape data
geom_map(aes(fill = fatalities), map = fifty_states) +
expand_limits(x = fifty_states$long, y = fifty_states$lat) +
scale_fill_gradient(low= "yellow", high = "maroon", breaks =
seq(min, max, floor((max-min)/4))) +
ggtitle(paste("Fatal Car Crashes for Ages", age_group, "in", year)) +
theme(text=element_text(size=16,  family="serif"),
plot.title = element_text(hjust = 0.5),
legend.position = "right",
panel.background = element_blank()) +
labs(fill = "Fatalities", x = "", y = "") +
coord_map() +
scale_x_continuous(breaks = NULL) +
scale_y_continuous(breaks = NULL)
}
getMap(2012, "25-34")
install.packages('mapproj')
getMap <- function(year, age_group) {
data <- eval(parse(text=paste0("data_", year)))
cols <- c("state", age_group,"unknown")
data <- data[grepl(paste(cols, collapse="|"), names(data))]
data$state <- tolower(data$state)
data$state <- gsub("dist", "district", data$state)
data <- data %>%
filter(state != "national",
state != "puerto rico")
fatalities <- data[, age_group]
fatalities <- as.numeric(fatalities)
min <- min(fatalities)
max <- max(fatalities)
ggplot(data, aes(map_id = state)) +
# map points to the fifty_states shape data
geom_map(aes(fill = fatalities), map = fifty_states) +
expand_limits(x = fifty_states$long, y = fifty_states$lat) +
scale_fill_gradient(low= "yellow", high = "maroon", breaks =
seq(min, max, floor((max-min)/4))) +
ggtitle(paste("Fatal Car Crashes for Ages", age_group, "in", year)) +
theme(text=element_text(size=16,  family="serif"),
plot.title = element_text(hjust = 0.5),
legend.position = "right",
panel.background = element_blank()) +
labs(fill = "Fatalities", x = "", y = "") +
coord_map() +
scale_x_continuous(breaks = NULL) +
scale_y_continuous(breaks = NULL)
}
getMap(2012, "25-34")
install.packages("shiny")
install.packages(c("data.table", "lubridate", "R.utils"))
source("R/map_function.R")
source("R/map_function.R")
install.packages('rsconnect')
rsconnect::setAccountInfo(name='bridhett',
token='F8001C2913C138315F947C3CF6F08400',
secret='/B5gbJ2MKiQmesxsqmgLR7pxPR3exxbqGoln0/Ds')
shiny::runApp('data/Final_Shiny')
runApp()
runApp('data/Final_Shiny')
shiny::runApp()
runApp()
source("R/format_data.R")
View(data_2010)
runApp()
runApp()
runApp()
runApp()
install.packages("leaflet")
install.packages("easycsv")
install.packages("easycsv")
runApp()
install.packages("tidyr")
install.packages("reshape2")
runApp()
install.packages("tmap")
library(easycsv)
library(ggplot2)
library(reshape2)
loadcsv_multi(directory = "data")
rename_rows <- function(file_name) {
names(file_name) <- c("state", "<5", "5-9", "10-15", "16-20", "21-24", "25-34", "35-44",
"45-54", "55-64", "65-74", ">74", "unknown", "total_killed")
return(file_name)
}
CrashData2010 <- rename_rows(FatalCrashData2010)
CrashData2011 <- rename_rows(FatalCrashData2011)
CrashData2012 <- rename_rows(FatalCrashData2012)
CrashData2013 <- rename_rows(FatalCrashData2013)
CrashData2014 <- rename_rows(FatalCrashData2014)
CrashData2015 <- rename_rows(FatalCrashData2015)
CrashData2016 <- rename_rows(FatalCrashData2016)
CrashData2017 <- rename_rows(FatalCrashData2017)
## data -> choosing a table from above
## state_name -> enter a string of state name
make_bar_graph <- function(data, state_name) {
melted_data <- melt(data, id.vars = "state", measure.vars = c("<5", "5-9", "10-15", "16-20", "21-24", "25-34", "35-44",
"45-54", "55-64", "65-74", ">74", "unknown"))
melted_data <- filter(melted_data, state == state_name)
melted_data$value <- as.numeric(melted_data$value)
cols <- c("blue", "red")[(melted_data$value > max(melted_data$value)/2) + 1]
barplot(melted_data$value, main=paste0("Number of death based on ages in ", state_name),
names.arg=melted_data$variable, cex.names = 0.7, yaxp=c(0, round(max(melted_data$value), -1), 5),
col = cols)
}
plot <- make_bar_graph(CrashData2011, "Georgia")
View(FatalCrashData2012)
View(CrashData2010)
runApp()
View(make_bar_graph)
View(make_bar_graph)
View(make_bar_graph)
plot <- make_bar_graph(CrashData2013, "Georgia")
plot <- make_bar_graph(CrashData2013, "Georgia")
runApp()
runApp()
runApp()
